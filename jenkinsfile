pipeline {
    agent any 
    stages{
        stage('checkout') {
            steps{
                echo "pulling code from git repo"
                //git url
                git branch: 'main', url: 'https://github.com/akashsakore/test.git'
            }

        }
        stage('build') {
            steps {
                echo "building the project"
                sh 'python3 --version'
            }
        }
        stage('test') {
            steps {
                echo "running test"
                sh '''
                python3 -m venv venv
                . venv/bin/activate
                pip install --upgrade pip
                pip install pytest
                if [ -d "tests" ]; then
                    pytest tests
                else
                    echo "No tests directory found, skipping tests."
                fi
                '''
            }
        }
        stage('deploy') {
            steps {
                echo "deployment"
                sh 'echo deployment completed'
            }
        }
    }
    post{
        success {
            echo "Pipeline executed successfully"
        }
        failure {
            echo "Pipeline failed"
        }
    }
}